<!DOCTYPE html>
<html lang="en">
<head>
    <!-- GOOGLE FONT -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Alice">
    <link rel="stylesheet" href="style.css">
    <title>DrumKit</title>
</head>
<body>
    <div class="background">
        <div class="keys">
            <div data-key="65" class="key"><kbd>A</kbd><span>CLAP</span></div>
            <div data-key="83" class="key"><kbd>S</kbd><span>HIHAT</span></div>
            <div data-key="68" class="key"><kbd>D</kbd><span>KICK</span></div>
            <div data-key="70" class="key"><kbd>F</kbd><span>OPENHAT</span></div>
            <div data-key="71" class="key"><kbd>G</kbd><span>BOOM</span></div>
            <div data-key="72" class="key"><kbd>H</kbd><span>RIDE</span></div>
            <div data-key="74" class="key"><kbd>J</kbd><span>SNARE</span></div>
            <div data-key="75" class="key"><kbd>K</kbd><span>TOM</span></div>
            <div data-key="76" class="key"><kbd>L</kbd><span>TINK</span></div>
        </div>
    </div>
    <audio data-key="65" src="./asset/sound/clap.wav"></audio>
    <audio data-key="83" src="./asset/sound/hihat.wav"></audio>
    <audio data-key="68" src="./asset/sound/kick.wav"></audio>
    <audio data-key="70" src="./asset/sound/openhat.wav"></audio>
    <audio data-key="71" src="./asset/sound/boom.wav"></audio>
    <audio data-key="72" src="./asset/sound/ride.wav"></audio>
    <audio data-key="74" src="./asset/sound/snare.wav"></audio>
    <audio data-key="75" src="./asset/sound/tom.wav"></audio>
    <audio data-key="76" src="./asset/sound/tink.wav"></audio>
    <script>
        function removeTransition(e) {
            if (!e.target.classList.contains('playing')) return;
            e.target.classList.remove('playing');
            }

        function playing(e) {
                const audio = document.querySelector('audio[data-key="' + e.keyCode + '"]');
                const key = document.querySelector('.key[data-key="' + e.keyCode + '"]');
                if (!audio) return;
                audio.currentTime = 0;
                audio.play();
                key.classList.add('playing');
            }

        window.addEventListener('keydown',playing)

        const keys = document.querySelectorAll('.key')
        keys.forEach(key => {
            key.addEventListener('transitionend', removeTransition)
        });
        
    </script>
</body>
</html>

<!-- What we have learned -->
<!-- 
    1. key events
    2. playing audio
    3. transitionend event
 -->